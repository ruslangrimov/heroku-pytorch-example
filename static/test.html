<html>
    <head>
        <title>Test form</title>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js" integrity="sha384-FzT3vTVGXqf7wRfy8k4BiyzvbNfeYjK+frTVqZeNDFl8woCbF0CYG6g2fMEFFo/i" crossorigin="anonymous"></script>

        <script>
            $(function() {
                $('#form').ajaxForm({
                    beforeSubmit: function () {
                        $('#result').hide();
                        $('#loading').show();
                    },
                    success: function(data) {
                        console.log(data);
                        if (data.result == 'OK') {
                            $('#loading').hide();
                            $('#text').text(data.text);
                            $('#result').show();
                        } else {
                            alert(data.result);
                        }
                    }
                });
            });
        </script>
    </head>
<body>
    <form method="POST" action="/upload_image?topk=5" enctype="multipart/form-data" id="form">
        Select image to upload:
        <input type="file" name="image" id="image">
        <input type="submit" value="Upload" name="submit">
    </form>
    <div id="result" style="display: none;">
        <table>
            <tr>
                <td><span id="text">text</span></td>
            </tr>
        </table>
    </div>
    <div id="loading" style="display: none;">
        Loading ...
    </div>
</body>

</html>
